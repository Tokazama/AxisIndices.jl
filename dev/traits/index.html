<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Axis Traits · AxisIndices.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">AxisIndices.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../quick_start/">Quick Start</a></li><li><span class="tocitem">Axes</span><ul><li><a class="tocitem" href="../axis/">The Axis</a></li><li class="is-active"><a class="tocitem" href>Axis Traits</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Indexing-Traits-1"><span>Indexing Traits</span></a></li><li><a class="tocitem" href="#Combine-Traits-1"><span>Combine Traits</span></a></li></ul></li><li><a class="tocitem" href="../broadcasting_axes/">Broadcasting Axes</a></li><li><a class="tocitem" href="../concatenating_axes/">Concatenating Axes</a></li><li><a class="tocitem" href="../appending_axes/">Appending Axes</a></li></ul></li><li><span class="tocitem">Arrays With Axes</span><ul><li><a class="tocitem" href="../axisindicesarray/">AbstractAxisIndices</a></li><li><a class="tocitem" href="../pretty_printing/">Pretty Printing</a></li><li><a class="tocitem" href="../compatibility/">Compatibility</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../coeftable/">CoefTable</a></li><li><a class="tocitem" href="../time/">TimeAxis</a></li></ul></li><li><a class="tocitem" href="../comparison/">Comparison to Other Packages</a></li><li><a class="tocitem" href="../acknowledgments/">Acknowledgments</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Axes</a></li><li class="is-active"><a href>Axis Traits</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Axis Traits</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Tokazma/AxisIndices.jl/blob/master/docs/src/traits.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Axis-Traits-1"><a class="docs-heading-anchor" href="#Axis-Traits-1">Axis Traits</a><a class="docs-heading-anchor-permalink" href="#Axis-Traits-1" title="Permalink"></a></h1><h1 id="Indexing-Traits-1"><a class="docs-heading-anchor" href="#Indexing-Traits-1">Indexing Traits</a><a class="docs-heading-anchor-permalink" href="#Indexing-Traits-1" title="Permalink"></a></h1><p>At its core, AxisIndices relies on a small change in processing indexing, permitting its unique abilities. Most arrays pass indexing arguments to the <code>to_indices</code> method at some point. Where a user provides performs indexing as <code>A[arg1, arg2]</code>, the translation to native indexing space looks a bit like this:</p><pre><code class="language-julia"># `axes_of_A = axes(A)` and `indexing_arguments = (arg1, arg2)`
function to_indices(A, axes_of_A::Tuple, indexing_arguments::Tuple)
    return (to_index(A, first(indexing_arguments)), to_indices(A, tail(axes_of_A), tail(indexing_arguments))...)
end</code></pre><p>This means that cusotmizing indexing behavior can be accomplished by either</p><ol><li>Circumeventing <code>to_index</code> by overloading <code>to_indices</code></li><li>Overloading <code>to_index</code> based on <code>A</code></li><li>Overloading <code>to_index</code> based on each indexing argument (e.g., <code>arg1</code>, <code>arg2</code>)</li></ol><p>This package changes this to:</p><pre><code class="language-julia"># `axes_of_A = axes(A)` and `indexing_arguments = (arg1, arg2)`
function to_indices(A, axes_of_A::Tuple, indexing_arguments::Tuple)
    return (to_index(first(axes_of_A), first(indexing_arguments)), to_indices(A, tail(axes_of_A), tail(indexing_arguments))...)
end</code></pre><p>Now each translation to native indexing space occurs through the direction of each axis of <code>A</code>. This means that customizing indexing behavior can <em>now</em> be accomplished by either</p><ol><li>Overloading <code>to_indices</code> based on <code>A</code>.</li><li>Overloading <code>to_index</code> based on each axis of <code>A</code> (e.g., <code>axes(A, 1), axes(A, 2)</code>)</li><li>Overloading <code>to_index</code> based on each indexing argument (e.g., <code>arg1</code>, <code>arg2</code>)</li></ol><p>However, this does not mean that overloading <code>to_index</code> is always safe or even advisable. This portion of the indexing pipeline is responsible for mapping arguments to the underlying memory of arrays, so you can cause some significant problems if you don&#39;t know what you&#39;re doing. It&#39;s also easy to inadvertently effect performance when changing how indexing works. Therefore, AxisIndices also small trait system for handling this. This is accomplished through the use of <code>ToIndexStyle</code>, which is injected into the <code>to_index</code> schema as follows:</p><pre><code class="language-julia">function to_index(axis, inds)
    return to_index(ToIndexStyle(eltype(inds)), axis, inds)
end</code></pre><p>Several subtypes of <code>ToIndexStyle</code> are provided, allowing users to customize indexing behavior without worrying about rewriting performance critical code.</p><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.ToIndexStyle" href="#AxisIndices.ToIndexStyle"><code>AxisIndices.ToIndexStyle</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ToIndexStyle</code></pre><p><code>ToIndexStyle</code> specifies how <code>to_index(axis, inds)</code> should convert a provided argument indices into the native indexing of structure. <code>ToIndexStyle(eltype(inds))</code> determines whether <a href="#AxisIndices.SearchKeys"><code>SearchKeys</code></a>, <a href="#AxisIndices.SearchIndices"><code>SearchIndices</code></a>, or <a href="#AxisIndices.GetIndices"><code>GetIndices</code></a> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL112-L119">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.SearchKeys" href="#AxisIndices.SearchKeys"><code>AxisIndices.SearchKeys</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ToKeysCollection()</code></pre><p>Calling <code>to_index(::SearchKeys, axis, inds) -&gt; newinds</code> results in:</p><ol><li>Identifying the positions of <code>keys(axis)</code> that equal <code>inds</code></li><li>Retreiving the <code>values(axis)</code> that correspond to the identified positions.</li><li>Attempt to reconstruct the axis type (e.g., <code>Axis</code> or <code>SimpleAxis</code>) with the relevant keys and values. This is only possible if <code>newinds isa AbstractUnitRange{Integer}</code> is <code>true</code></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL84-L91">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.SearchIndices" href="#AxisIndices.SearchIndices"><code>AxisIndices.SearchIndices</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">SearchIndices()</code></pre><p>Calling <code>to_index(::SearchIndices, axis, inds) -&gt; newinds</code> results in:</p><ol><li>Identifying the positions of <code>values(axis)</code> that equal <code>inds</code></li><li>Attempt to reconstruct the axis type (e.g., <code>Axis</code> or <code>SimpleAxis</code>) with the relevant keys and values. This is only possible if <code>newinds isa AbstractUnitRange{Integer}</code> is <code>true</code></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL94-L100">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.GetIndices" href="#AxisIndices.GetIndices"><code>AxisIndices.GetIndices</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">GetIndices()</code></pre><p>Calling <code>to_index(::GetIndices, axis, inds) -&gt; newinds</code> results in:</p><ol><li>Performs <code>getindex(values(axis), inds)</code></li><li>If the initual output is a subtype of <code>AbstractUnitRange{Integer}</code> then an axis type is returned. Otherwise just the initial output is returned.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL103-L109">source</a></section></article><h2 id="Combine-Traits-1"><a class="docs-heading-anchor" href="#Combine-Traits-1">Combine Traits</a><a class="docs-heading-anchor-permalink" href="#Combine-Traits-1" title="Permalink"></a></h2><p>One natural consequence of having axes as independent entities from the actual array data is that it complicates operations such as <code>cat</code> and <code>append!</code>.</p><ol><li>How should we propagate characteristics from the values of each axis so that the resulting array is still appropriately memory mapped.</li><li>How should we combine keys of different types and that are not necessarily unique?</li></ol><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.CombineStyle" href="#AxisIndices.CombineStyle"><code>AxisIndices.CombineStyle</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CombineStyle</code></pre><p>Abstract type that determines the behavior of <code>broadcast_axis</code>, <code>cat_axis</code>, <code>append_axis!</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL24-L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.CombineAxis" href="#AxisIndices.CombineAxis"><code>AxisIndices.CombineAxis</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CombineAxis</code></pre><p>Subtype of <code>CombineStyle</code> that informs relevant methods to produce a subtype of <code>AbstractAxis</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.CombineSimpleAxis" href="#AxisIndices.CombineSimpleAxis"><code>AxisIndices.CombineSimpleAxis</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CombineSimpleAxis</code></pre><p>Subtype of <code>CombineStyle</code> that informs relevant methods to produce a subtype of <code>AbstractSimpleAxis</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.CombineResize" href="#AxisIndices.CombineResize"><code>AxisIndices.CombineResize</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CombineResize</code></pre><p>Subtype of <code>CombineStyle</code> that informs relevant methods that axes should be combined by resizing a collection (as opposed to by concatenation or appending).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL45-L50">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AxisIndices.CombineStack" href="#AxisIndices.CombineStack"><code>AxisIndices.CombineStack</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CombineStack</code></pre><p>Subtype of <code>CombineStyle</code> that informs relevant methods that axes should be combined by stacking elements in some whay (as opposed to resizing a collection).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tokazma/AxisIndices.jl/blob/1b70b5b975b9e03500831e091c0a9d260f40bac4/src/traits.jl#LL53-L58">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../axis/">« The Axis</a><a class="docs-footer-nextpage" href="../broadcasting_axes/">Broadcasting Axes »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 22 March 2020 03:56">Sunday 22 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
