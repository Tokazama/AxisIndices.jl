<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Combining Axes · AxisIndices.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">AxisIndices.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../quick_start/">Quick Start</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../axis/">The Axis</a></li><li><a class="tocitem" href="../internals_of_indexing/">Internals of Indexing</a></li><li><a class="tocitem" href="../pretty_printing/">Pretty Printing</a></li><li><a class="tocitem" href="../compatibility/">Compatibility</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../indexing/">Indexing Tutorial</a></li><li><a class="tocitem" href="../coeftable/">CoefTable</a></li><li><a class="tocitem" href="../time/">TimeAxis Guide</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../public_api/">Public API</a></li><li><a class="tocitem" href="../standard_library_api/">Standard Library API</a></li><li><a class="tocitem" href="../internal_api/">Internal API</a></li><li><a class="tocitem" href="../experimental/">Experimental API</a></li></ul></li><li><a class="tocitem" href="../comparison/">Comparison to Other Packages</a></li><li><a class="tocitem" href="../acknowledgments/">Acknowledgments</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Combining Axes</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Combining Axes</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Tokazma/AxisIndices.jl/blob/master/docs/src/combining_axes.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Combining-Axes-1"><a class="docs-heading-anchor" href="#Combining-Axes-1">Combining Axes</a><a class="docs-heading-anchor-permalink" href="#Combining-Axes-1" title="Permalink"></a></h1><p>One natural consequence of having axes as independent entities from the actual array data is that it complicates operations such as <code>cat</code> and <code>append!</code>.</p><ol><li>How should we propagate characteristics from the values of each axis so that the resulting array is still appropriately memory mapped.</li><li>How should we combine keys of different types and that are not necessarily unique?</li></ol><h3 id="Appending-Axes-1"><a class="docs-heading-anchor" href="#Appending-Axes-1">Appending Axes</a><a class="docs-heading-anchor-permalink" href="#Appending-Axes-1" title="Permalink"></a></h3><p>Appending axes works similar to concatenating axes except that the first argument is mutated.</p><p>Customizing appending axes should be accomplished through either <a href="../internal_api/#AxisIndices.AxisCore.CombineStyle"><code>AxisIndices.CombineStyle</code></a> or <a href="../internal_api/#AxisIndices.AxisCore.append_axis!"><code>AxisIndices.append_axis!</code></a>.</p><h3 id="Concatenating-Axes-1"><a class="docs-heading-anchor" href="#Concatenating-Axes-1">Concatenating Axes</a><a class="docs-heading-anchor-permalink" href="#Concatenating-Axes-1" title="Permalink"></a></h3><p>Concatenating axes can happen by one of the following:</p><ol><li>Stacking two collections of completely unique elements</li><li>Resizing a range of values</li></ol><p>The second only happens when the two collections provided are subtypes of <code>AbstractRange</code>.</p><p>Customizing concatenating axes should be accomplished through either <a href="../internal_api/#AxisIndices.AxisCore.CombineStyle"><code>AxisIndices.CombineStyle</code></a> or <a href="../internal_api/#AxisIndices.AxisCore.cat_axis"><code>AxisIndices.cat_axis</code></a>.</p><h1 id="Broadcasting-Axes-1"><a class="docs-heading-anchor" href="#Broadcasting-Axes-1">Broadcasting Axes</a><a class="docs-heading-anchor-permalink" href="#Broadcasting-Axes-1" title="Permalink"></a></h1><p>There are three things that determine the output of a broadcasting axes.</p><ol><li>Standard promotion</li><li>Key specific promotion (or promotion over <code>Real</code>)</li><li>Order of arguments promotion</li></ol><p>Take the following vectors.</p><pre><code class="language-julia-repl">julia&gt; using AxisIndices

julia&gt; a = ones(3);

julia&gt; b = AxisIndicesArray(a, 2:4);

julia&gt; c = AxisIndicesArray(a, [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]);</code></pre><p>We assume the lack of a formal axis defined in <code>a</code> indicates that it&#39;s keys are unimportant. Therefore, we freely choose any keys that are formally defined elsewhere to belong to the new result of a broadcast statement. This is the kind of behavior one gets from <strong>standard type promotion</strong>.</p><pre><code class="language-julia-repl">julia&gt; axes_keys(a .+ b)
(UnitMRange(2:4),)

julia&gt; axes_keys(b .+ a)
(UnitMRange(2:4),)

julia&gt; axes_keys(a .+ c)
([&quot;1&quot;, &quot;2&quot;, &quot;3&quot;],)

julia&gt; axes_keys(c .+ a)
([&quot;1&quot;, &quot;2&quot;, &quot;3&quot;],)</code></pre><p>However, when we do the same with <code>b</code> and <code>c</code> they both have formally defined keys.</p><pre><code class="language-julia-repl">julia&gt; axes_keys(b .+ c)
([&quot;2&quot;, &quot;3&quot;, &quot;4&quot;],)

julia&gt; axes_keys(c .+ b)
([&quot;1&quot;, &quot;2&quot;, &quot;3&quot;],)</code></pre><p>Notice that all outputs become elements of <code>String</code> and a collection that are <code>Vector</code>. We can&#39;t depend upon the default promotion in base (e.g., <code>promote(x, y)</code>) because some keys won&#39;t have <code>promote_rule</code> defined for two key types. It may not be appropriate to define a promotion rule between something like <code>Int</code> and <code>String</code> in the base Julia library because there is not universally meaningful way to promote it without context. In this instance we clearly want to apply some sort of label along an axis and that label may or may not be intended to parse as an <code>Int</code>, so we always default to broadcasting the key type that is not a subtype of <code>Real</code>.</p><pre><code class="language-julia-repl">julia&gt; d = AxisIndicesArray(a, [:a, :b, :c]);

julia&gt; axes_keys(a .+ d, 1) == [:a, :b, :c]
true</code></pre><p>The term <strong>key specific promotion</strong> is used because it is only sensible in the context of keys.</p><p>Finally, if both key types are non <code>Real</code> then <strong>order of arguments</strong> determines promotion.</p><pre><code class="language-julia-repl">julia&gt; axes_keys(c .+ d)
([&quot;1&quot;, &quot;2&quot;, &quot;3&quot;],)

julia&gt; axes_keys(d .+ c, 1) == [:a, :b, :c]
true</code></pre><p>Customizing broadcasting behavior should be accomplished through either <a href="../internal_api/#AxisIndices.AxisCore.CombineStyle"><code>AxisIndices.CombineStyle</code></a> or <a href="../internal_api/#AxisIndices.AxisCore.broadcast_axis"><code>AxisIndices.broadcast_axis</code></a>.</p></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 15 May 2020 17:47">Friday 15 May 2020</span>. Using Julia version 1.4.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
